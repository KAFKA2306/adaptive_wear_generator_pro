# AdaptiveWear Generator Pro - 更新履歴

## バージョン 1.1.0 (予定) - UI改修とドキュメント整備

### 主な変更点

*   **UIレイアウトの変更:**
    *   メインパネル ([`ui/panel_main.py`](ui/panel_main.py:1)) のレイアウトが改善されました。
        *   **素体選択 (`Base Body`) がパネルの最上部に移動**し、より直感的に操作できるようになりました。
        *   **生成ボタン (`Generate Wear`) がパネルの最下部に移動**し、各種設定を行った後に実行する流れが明確になりました。
    *   各オプションセクション（フィット設定、衣装タイプ別設定など）が整理され、視認性が向上しました。
*   **素体選択方法の明確化:**
    *   従来通り、パネル上部の「Base Body」プロパティから、シーン内のメッシュオブジェクトを素体として選択します。この選択が衣装生成の基準となります。
*   **オペレーターの改善 ([`core/operators.py`](core/operators.py:1)):**
    *   衣装生成オペレーター (`AWGP_OT_GenerateWear`) において、素体選択に関するバリデーションが強化されました。
        *   素体が選択されていない場合、または選択されたオブジェクトがメッシュでない場合に、エラーメッセージを表示して処理を中断するようになりました。
    *   各衣装タイプ生成時に、必要な頂点グループ（例：パンツの場合は "hip" や "腰"）を検索し、見つからない場合はエラーメッセージを表示するようになりました。日本語の頂点グループ名も考慮されるように改善されています。

### 新しい操作手順

1.  **Blenderを開き、AdaptiveWear Generator Pro アドオンを有効にします。**
2.  **3Dビューポートのサイドバー（Nキー）から「AdaptiveWear」タブを選択します。**
3.  **「AdaptiveWear Generator」パネルが表示されます。**
4.  **パネル最上部の「Base Body」セクションで、衣装を適用したいキャラクターのメッシュオブジェクト（素体）を選択します。**
    *   シーン内に存在するメッシュオブジェクトがドロップダウンリストに表示されます。
5.  **「衣装タイプ」を選択します。** (例: Pants, Bra, Socks, Glovesなど)
6.  **「フィット設定」で、衣装のフィット感や厚みを調整します。**
    *   `フィット感を密着させる`: チェックを入れると、より素体に沿ったタイトなフィットになります。
    *   `厚み`: 衣装の厚みを設定します。
7.  **選択した「衣装タイプ」に応じて、追加の設定項目が表示される場合があります。** (例: 靴下の長さ、手袋の指の有無など)
    *   これらの項目を適宜設定してください。
8.  **パネル最下部の「Generate Wear」ボタンをクリックします。**
9.  **素体と設定に基づいて、新しい衣装メッシュがシーンに生成されます。**

### コードの変更点詳細

*   **[`ui/panel_main.py`](ui/panel_main.py:1):**
    *   `AWGP_PT_MainPanel` クラスの `draw` メソッド内のUI要素の配置順序が変更されました。
    *   素体選択 (`prop_search` for `base_body`) を最初に描画し、その後に衣装オプション、最後に生成ボタン (`operator("awgp.generate_wear")`) を描画するように修正。
    *   可読性向上のためコメントを追加し、デバッグ用print文についてはリリース時のコメントアウトまたは削除を推奨するコメントを付記しました。
*   **[`core/operators.py`](core/operators.py:1):**
    *   `AWGP_OT_GenerateWear` クラスの `execute` メソッドに、素体オブジェクトの存在確認とタイプ確認のバリデーション処理を追加しました。
    *   `find_vertex_group_by_keyword` 関数を呼び出す際に、日本語のキーワード（例：「胸」、「脚」、「腕」など）も検索対象に追加し、より多くの素体に対応できるようにしました。
    *   エラーメッセージをより具体的にし、ユーザーが問題解決をしやすくなるように改善しました。
    *   コードの意図を明確にするためのコメント（docstringや行コメント）を追加しました。また、デバッグ用print文については、リリース時のコメントアウトまたは削除を推奨するコメントを付記しました。

### リリースノート サマリー (v1.1.0案)

*   **機能改善:**
    *   メインパネルのUIレイアウトを大幅に改善し、素体選択を最上部に、生成ボタンを最下部に配置しました。これにより、操作フローがより直感的になりました。
    *   衣装生成時の素体バリデーションを強化し、エラーハンドリングを改善しました。
    *   頂点グループ検索時に日本語名も考慮するようになり、より多くの素体モデルに対応しました。
*   **その他:**
    *   コードの可読性向上のためのコメント追加と軽微なリファクタリングを行いました。